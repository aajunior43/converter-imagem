<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Conversor de Imagens para PNG</title>
    <style>
        /* Estilos mantidos como no código original */
    </style>
</head>
<body>
    <h1>Conversor de Imagens para PNG</h1>
    <!-- Adicionado o atributo 'multiple' para permitir a seleção de várias imagens -->
    <input type="file" id="imageFile" name="imageFile" accept="image/*" multiple>
    <!-- O botão de download foi removido, pois agora teremos vários links de download -->
    <div id="downloadLinks"></div>
    <canvas id="canvas"></canvas>
    <!-- A tag img foi removida, pois agora teremos várias imagens -->
    <div id="output"></div>
    <script>
        document.getElementById('imageFile').addEventListener('change', function(e) {
            var files = e.target.files;
            for (let i = 0; i < files.length; i++) {
                var canvas = document.createElement('canvas');
                var ctx = canvas.getContext('2d');
                var img = new Image();
                img.onload = function() {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    var pngUrl = canvas.toDataURL('image/png');
                    
                    // Criar um novo elemento de imagem para cada arquivo
                    var newImg = document.createElement('img');
                    newImg.src = pngUrl;
                    newImg.style.maxWidth = '100%';
                    newImg.style.height = 'auto';
                    newImg.style.marginTop = '20px';
                    newImg.style.borderRadius = '5px';
                    newImg.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
                    document.getElementById('output').appendChild(newImg);
                    
                    // Criar um novo link de download para cada arquivo
                    var downloadLink = document.createElement('a');
                    downloadLink.href = pngUrl;
                    downloadLink.download = 'convertido-' + i + '.png';
                    downloadLink.textContent = 'Baixar imagem PNG ' + (i+1);
                    downloadLink.style.display = 'block';
                    downloadLink.style.margin = '10px';
                    document.getElementById('downloadLinks').appendChild(downloadLink);
                };
                img.onerror = function() {
                    alert('Ocorreu um erro ao carregar a imagem. Por favor, tente novamente com uma imagem diferente.');
                };
                img.src = URL.createObjectURL(files[i]);
            }
        });
    </script>
</body>
</html>
